var O=Object.defineProperty;var T=(i,s,r)=>s in i?O(i,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[s]=r;var h=(i,s,r)=>T(i,typeof s!="symbol"?s+"":s,r);import{j as t,a as y,L as D,r as f,_ as N,f as H,u as X}from"./index-DeQGFpGp.js";import{u as Y}from"./getAspectRatioScreen-5O-VdANn.js";const V="_constructor_rujwi_1",W="_constructor__box_rujwi_25",M="_constructor__positon_rujwi_34",q="_constructor__action_rujwi_60",G="_red_rujwi_84",m={constructor:V,constructor__box:W,constructor__positon:M,"constructor-positon__coord":"_constructor-positon__coord_rujwi_40","--highlight":"_--highlight_rujwi_44","--perimeter":"_--perimeter_rujwi_48","--putting":"_--putting_rujwi_52","contsturtor-positon__port":"_contsturtor-positon__port_rujwi_56",constructor__action:q,"constructor-action__exit":"_constructor-action__exit_rujwi_65","constructor-action__play":"_constructor-action__play_rujwi_76",red:G,"constructor-action-play__bang":"_constructor-action-play__bang_rujwi_97","constructor-action-play__text":"_constructor-action-play__text_rujwi_190"},J="_box_1u9ej_1",K="_box__row_1u9ej_14",o={box:J,box__row:K,"box-row__rect":"_box-row__rect_1u9ej_19"};function Q({cls:i="",inputRef:s}){return t.jsxs("div",{ref:s,className:y(i,o.box),"data-field-battle":!0,children:[t.jsxs("div",{className:o.box__row,children:[t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"0","data-coord-y":"0"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"1","data-coord-y":"0"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"2","data-coord-y":"0"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"3","data-coord-y":"0"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"4","data-coord-y":"0"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"5","data-coord-y":"0"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"6","data-coord-y":"0"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"7","data-coord-y":"0"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"8","data-coord-y":"0"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"9","data-coord-y":"0"})]}),t.jsxs("div",{className:o.box__row,children:[t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"0","data-coord-y":"1"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"1","data-coord-y":"1"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"2","data-coord-y":"1"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"3","data-coord-y":"1"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"4","data-coord-y":"1"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"5","data-coord-y":"1"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"6","data-coord-y":"1"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"7","data-coord-y":"1"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"8","data-coord-y":"1"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"9","data-coord-y":"1"})]}),t.jsxs("div",{className:o.box__row,children:[t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"0","data-coord-y":"2"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"1","data-coord-y":"2"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"2","data-coord-y":"2"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"3","data-coord-y":"2"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"4","data-coord-y":"2"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"5","data-coord-y":"2"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"6","data-coord-y":"2"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"7","data-coord-y":"2"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"8","data-coord-y":"2"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"9","data-coord-y":"2"})]}),t.jsxs("div",{className:o.box__row,children:[t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"0","data-coord-y":"3"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"1","data-coord-y":"3"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"2","data-coord-y":"3"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"3","data-coord-y":"3"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"4","data-coord-y":"3"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"5","data-coord-y":"3"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"6","data-coord-y":"3"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"7","data-coord-y":"3"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"8","data-coord-y":"3"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"9","data-coord-y":"3"})]}),t.jsxs("div",{className:o.box__row,children:[t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"0","data-coord-y":"4"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"1","data-coord-y":"4"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"2","data-coord-y":"4"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"3","data-coord-y":"4"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"4","data-coord-y":"4"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"5","data-coord-y":"4"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"6","data-coord-y":"4"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"7","data-coord-y":"4"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"8","data-coord-y":"4"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"9","data-coord-y":"4"})]}),t.jsxs("div",{className:o.box__row,children:[t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"0","data-coord-y":"5"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"1","data-coord-y":"5"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"2","data-coord-y":"5"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"3","data-coord-y":"5"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"4","data-coord-y":"5"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"5","data-coord-y":"5"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"6","data-coord-y":"5"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"7","data-coord-y":"5"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"8","data-coord-y":"5"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"9","data-coord-y":"5"})]}),t.jsxs("div",{className:o.box__row,children:[t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"0","data-coord-y":"6"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"1","data-coord-y":"6"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"2","data-coord-y":"6"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"3","data-coord-y":"6"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"4","data-coord-y":"6"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"5","data-coord-y":"6"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"6","data-coord-y":"6"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"7","data-coord-y":"6"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"8","data-coord-y":"6"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"9","data-coord-y":"6"})]}),t.jsxs("div",{className:o.box__row,children:[t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"0","data-coord-y":"7"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"1","data-coord-y":"7"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"2","data-coord-y":"7"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"3","data-coord-y":"7"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"4","data-coord-y":"7"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"5","data-coord-y":"7"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"6","data-coord-y":"7"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"7","data-coord-y":"7"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"8","data-coord-y":"7"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"9","data-coord-y":"7"})]}),t.jsxs("div",{className:o.box__row,children:[t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"0","data-coord-y":"8"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"1","data-coord-y":"8"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"2","data-coord-y":"8"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"3","data-coord-y":"8"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"4","data-coord-y":"8"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"5","data-coord-y":"8"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"6","data-coord-y":"8"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"7","data-coord-y":"8"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"8","data-coord-y":"8"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"9","data-coord-y":"8"})]}),t.jsxs("div",{className:o.box__row,children:[t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"0","data-coord-y":"9"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"1","data-coord-y":"9"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"2","data-coord-y":"9"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"3","data-coord-y":"9"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"4","data-coord-y":"9"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"5","data-coord-y":"9"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"6","data-coord-y":"9"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"7","data-coord-y":"9"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"8","data-coord-y":"9"}),t.jsx("div",{className:o["box-row__rect"],"data-coord-x":"9","data-coord-y":"9"})]})]})}const P={};function k({paramsLink:i,paramsBtn:s,children:r,cls:a,onClick:e}){return i?t.jsx(D,{to:i.link,className:y(P.button,a),children:r}):s?t.jsx("button",{className:y(P.button,a),onClick:()=>e(),children:r}):t.jsx("div",{className:y(P.button,a),children:"Произошла ошибка"})}class U{constructor(s,r){h(this,"nameClass","MoveShip");h(this,"objError",{notFinedShip:`${this.nameClass}: Ships not fined`,notFinedShipInCurrentObj:`${this.nameClass}: Ship not found in current ship drag parameters object`,failedLinkPortShip:`${this.nameClass}: Failed to linked ship with port`,failedFinedHighLightBlock:`${this.nameClass}: Failed to secure ship over field because first allocated block was not found`});h(this,"objWarn",{perimeterAnotherShip:`${this.nameClass}: Perimeter of another ship`,notFoundCoordForPerimeter:`${this.nameClass}: Coordinate not found for perimeter`});h(this,"style");h(this,"field");h(this,"coordFiled");h(this,"arrShip");h(this,"arrFieldRect");h(this,"arrCoordFieldRect");h(this,"arrObjPotShip",[]);h(this,"currentParamsShip",{widthParentShip:0,heightParentShip:0,shiftX:0,shiftY:0,plane:"horizontal",size:0,index:0});h(this,"_arrCoordPuttingShip",[]);h(this,"clickCount",0);h(this,"lastClickTime",0);h(this,"init",()=>{if(this.arrShip.length===0||this.arrFieldRect.length===0)throw new Error(this.objError.notFinedShip);this.arrShip.forEach(s=>{s.addEventListener("mousedown",this.takeShip),s.ondragstart=function(){return!1}})});h(this,"unInit",()=>{if(this.arrShip.length===0||this.arrFieldRect.length===0)throw new Error(this.objError.notFinedShip);this.arrShip.forEach(s=>{s.removeEventListener("mousedown",this.takeShip),s.removeEventListener("mouseup",this.checkPosition),s.ondragstart=function(){return!0}}),document.removeEventListener("mousemove",this.moveCursor)});h(this,"resetPositionShips",()=>{});h(this,"takeShip",s=>{try{s.preventDefault();const r=s.target.closest("[data-ship]"),a=r.getAttribute("data-plane");let e=r.closest("[data-port-ship]");const c=r.dataset.putting;e||(e=document.querySelector(`[data-port-ship][data-index='${r.dataset.index}']`));const n=this.setIndexPortShip(r,e);if(!n)throw new Error(this.objError.failedLinkPortShip+", because index = "+n);this.currentParamsShip={parentShip:r,portShip:e,index:n,plane:a,size:+r.dataset.shipSize,widthParentShip:r.offsetWidth,heightParentShip:r.offsetHeight,shiftX:s.clientX-r.getBoundingClientRect().left,shiftY:s.clientY-r.getBoundingClientRect().top},c=="true"&&this.checkDblClick(this.changePlane),r.style.position="absolute",r.style.zIndex="1000",document.body.appendChild(r),this.currentCord(s.clientX,s.clientY),document.addEventListener("mousemove",this.moveCursor),r.addEventListener("mouseup",this.checkPosition)}catch(r){console.error(r)}});h(this,"moveCursor",s=>{if(s.preventDefault(),this.currentCord(s.clientX,s.clientY),!this.isCheckAreaShip()){this.resetHighlightCoord();return}this.toggleHighlightShipCoord()});h(this,"checkPosition",s=>{try{s.preventDefault(),this.isCheckAreaShip()?this.putShip():this.returnShip()}catch(r){console.error(r)}});h(this,"currentCord",(s,r)=>{const a=this.currentParamsShip.parentShip,e=s-this.currentParamsShip.shiftX,c=r-this.currentParamsShip.shiftY;a.style.left=e+"px",a.style.top=c+"px"});h(this,"putShip",()=>{try{const{parentShip:s,size:r}=this.currentParamsShip,a=[...this.arrFieldRect].filter(_=>_.classList.contains(this.style.highlight)),e=a[0],c=a[a.length-1],n=e==null?void 0:e.getBoundingClientRect();if(!s)throw new Error(this.objError.notFinedShipInCurrentObj);if(a.length!=r){this.returnShip(),console.warn(this.objWarn.perimeterAnotherShip);return}if(!e)throw this.returnShip(),new Error(this.objError.failedFinedHighLightBlock);const l={ship:{index:+s.dataset.index,plane:this.currentParamsShip.plane,size:+s.dataset.shipSize},firstCoord:{x:+e.dataset.coordX,y:+e.dataset.coordY},lastCoord:{x:+c.dataset.coordX,y:+c.dataset.coordY}};this.resetHighlightCoord(),this.changeArrCoordPuttingShip(+s.dataset.index,"push",l),this.setPerimeterPuttingCoord("set",a),s.style.top=n.top+"px",s.style.left=n.left+"px",s.dataset.putting="true",document.removeEventListener("mousemove",this.moveCursor),s.removeEventListener("mouseup",this.checkPosition)}catch(s){console.error(s)}});h(this,"returnShip",()=>{try{const{parentShip:s,portShip:r,index:a,plane:e}=this.currentParamsShip,c=[...this.arrFieldRect].filter(n=>n.dataset.dataIndex===`${a}`);if(!r||!s)return;this.changeArrCoordPuttingShip(+a,"delete"),this.resetHighlightCoord(),this.setPerimeterPuttingCoord("delete",c),r.appendChild(s),e==="vertical"&&this.changePlane("vertical"),s.style.zIndex="2",s.style.left="0",s.style.top="0",s.dataset.putting="false",s.removeEventListener("mouseup",this.checkPosition),document.removeEventListener("mousemove",this.moveCursor)}catch(s){console.error(s)}});h(this,"changePlane",s=>{const{parentShip:r,widthParentShip:a,heightParentShip:e,shiftX:c,shiftY:n}=this.currentParamsShip;(s||this.currentParamsShip.plane)==="horizontal"?(r.dataset.plane="vertical",this.currentParamsShip.plane="vertical",r.style.width=e+"px",r.style.height=a+"px",this.currentParamsShip.shiftX=n,this.currentParamsShip.shiftY=c,this.currentParamsShip.widthParentShip=e,this.currentParamsShip.heightParentShip=a):(r.dataset.plane="horizontal",this.currentParamsShip.plane="horizontal",r.style.width=e+"px",r.style.height=a+"px",this.currentParamsShip.shiftX=n,this.currentParamsShip.shiftY=c,this.currentParamsShip.widthParentShip=a,this.currentParamsShip.heightParentShip=e)});h(this,"setIndexPortShip",(s,r)=>{const a=s.dataset.index;let e;if(!a&&r){console.log(this.nameClass+": The ship was not connected to the port, start linkig...");const c={port:r,parentShip:s};this.arrObjPotShip.push(c),e=this.arrObjPotShip.length,r.setAttribute("data-index",e+""),s.setAttribute("data-index",e+""),console.log(this.nameClass+": The ship successfully linked the port")}else a&&(e=Number(a));return e});h(this,"toggleHighlightShipCoord",()=>{const{parentShip:s}=this.currentParamsShip;if(!s)throw new Error(this.objError.notFinedShipInCurrentObj);const r=s.getBoundingClientRect();this.arrCoordFieldRect.forEach((a,e)=>{if(this.isShowingHighlightShipCoord(a,r)){const c=this.arrFieldRect[e];!c.classList.contains(this.style.perimeter)&&!c.classList.contains(this.style.putting)&&c.classList.add(this.style.highlight)}else this.arrFieldRect[e].classList.remove(this.style.highlight)})});h(this,"isShowingHighlightShipCoord",(s,r)=>{const{plane:a}=this.currentParamsShip,e=a==="horizontal";let c=!1,n=r.left-s.width/2,l=r.right+s.width/2;if(e){const _=s.top-r.height/2,p=s.bottom+r.height/2;this.coordFiled.right<r.right&&(n=n-(r.right-this.coordFiled.right)),this.coordFiled.left>r.left&&(l=l+(this.coordFiled.left-r.left));const x=r.top>=_&&r.bottom<=p;c=s.left>=n&&s.right<=l&&x}else{let _=r.top-r.width/2,p=r.bottom+r.width/2;this.coordFiled.top>r.top&&(p=p+(this.coordFiled.top-r.top)),this.coordFiled.bottom<r.bottom&&(_=_-(r.bottom-this.coordFiled.bottom));const x=s.top>=_&&s.bottom<=p;c=s.left>=n&&s.right<=l&&x}return c});h(this,"isCheckAreaShip",()=>{const{parentShip:s}=this.currentParamsShip;if(!s)throw new Error(this.objError.notFinedShipInCurrentObj);const{widthParentShip:r,heightParentShip:a}=this.currentParamsShip,e=this.coordFiled,c=s.getBoundingClientRect(),n={top:e.top-a/1.5,bottom:e.bottom+a/1.5,left:e.left-r/1.5,right:e.right+r/1.5};let l=!0;return(c.top<n.top||c.bottom>n.bottom||c.left<n.left||c.right>n.right)&&(l=!1),l});h(this,"changeArrCoordPuttingShip",(s,r,a)=>{const e=this._arrCoordPuttingShip.findIndex(c=>s==c.ship.index);switch(r){case"delete":+e!=-1&&this._arrCoordPuttingShip.splice(e,1);break;case"push":e==-1?this._arrCoordPuttingShip.push(a):this._arrCoordPuttingShip[e]=a;break}});h(this,"checkDblClick",s=>{let r=!1;const{index:a}=this.currentParamsShip,e=Date.now(),c=[...this.arrFieldRect].filter(n=>n.dataset.index===`${a}`);return this.setPerimeterPuttingCoord("delete",c),e-this.lastClickTime<300?this.clickCount++:this.clickCount=1,this.lastClickTime=e,this.clickCount==2&&(r=!0,this.clickCount=0,s()),this.toggleHighlightShipCoord(),r});h(this,"resetHighlightCoord",()=>{this.arrFieldRect.forEach(s=>{s&&s.classList.remove(this.style.highlight)})});h(this,"setPerimeterPuttingCoord",(s,r)=>{try{const{perimeter:a,putting:e}=this.style,{plane:c,index:n}=this.currentParamsShip,l=c==="horizontal",_=(x,v)=>{if(x)if(v)if(!x.hasAttribute("data-perimeter-index"))x.dataset.perimeterIndex="["+n+"]",x.classList.toggle(a,v);else{const j=JSON.parse(x.dataset.perimeterIndex);j.push(n);const u=JSON.stringify(j);x.dataset.perimeterIndex=u;return}else{const j=JSON.parse(x.dataset.perimeterIndex).filter(u=>+u!==n);if(j.length===0)x.removeAttribute("data-perimeter-index"),x.classList.toggle(a,v);else{const u=JSON.stringify(j);x.dataset.perimeterIndex=u}}},p=(x,v)=>this.field.querySelector(`[data-coord-x='${x}'][data-coord-y='${v}']`);r.forEach((x,v,j)=>{const u=x.dataset.coordX,b=x.dataset.coordY,S=v===0,C=v===j.length-1,z=l?p(+u,+b-1):p(+u+1,+b),F=l?p(+u,+b+1):p(+u-1,+b),L=S&&l?x.previousElementSibling:S&&!l?p(+u,+b-1):null,I=C&&l?x.nextElementSibling:C&&!l?p(+u,+b+1):null,R=S&&l||S&&!l?p(+u-1,+b-1):null,B=S&&l?p(+u-1,+b+1):S&&!l?p(+u+1,+b-1):null,$=C&&l?p(+u+1,+b+1):C&&!l?p(+u-1,+b+1):null,A=C&&l?p(+u+1,+b-1):C&&!l?p(+u+1,+b+1):null,w=s==="set";_(z,w),_(F,w),_(L,w),_(I,w),_(R,w),_(B,w),_($,w),_(A,w),x.classList.toggle(e,w),w?x.dataset.index=""+n:x.removeAttribute("data-index")})}catch(a){console.error(a)}});this.style=r,this.field=s,this.coordFiled=s.getBoundingClientRect(),this.arrShip=document.querySelectorAll("[data-ship]"),this.arrFieldRect=s.querySelectorAll("[data-coord-x]"),this.arrCoordFieldRect=[...this.arrFieldRect].map(a=>a.getBoundingClientRect())}get arrCoordPuttingShip(){return this._arrCoordPuttingShip}}const Z="/seabattle/assets/ship-0sRf08Cm.jpg",tt="/seabattle/assets/bang-DJN_2QaK.png",ot="/seabattle/assets/search-tanker-Dy1ri2hG.svg",st="_constructor_u6bz6_9",rt="_ship_u6bz6_65",d={constructor:st,"contsturtor-title":"_contsturtor-title_u6bz6_17","contsturtor-positon__port-station":"_contsturtor-positon__port-station_u6bz6_48","contsturtor-positon__port-wrapper":"_contsturtor-positon__port-wrapper_u6bz6_53","--one":"_--one_u6bz6_60",ship:rt,"constructor-rect":"_constructor-rect_u6bz6_71"},at=(i,s,r)=>{const a=i[s];return a?typeof a=="function"?a():Promise.resolve(a):new Promise((e,c)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(c.bind(null,new Error("Unknown variable dynamic import: "+s+(s.split("/").length!==r?". Note that variables only represent file names one level deep.":""))))})},et="_ship_g2la1_1",E={ship:et,"--vertical":"_--vertical_g2la1_6","--horizontal":"_--horizontal_g2la1_10"};function g({style:i,cls:s,view:r="blue",size:a,plane:e}){const c=+i.width*+a+"px",[n,l]=f.useState();return f.useEffect(()=>{at(Object.assign({"../../../assets/icons/ships/black-1-ship.svg":()=>N(()=>import("./black-1-ship-GaUk5HWb.js"),[]),"../../../assets/icons/ships/black-2-ship.svg":()=>N(()=>import("./black-2-ship-DC_9SWsq.js"),[]),"../../../assets/icons/ships/black-3-ship.svg":()=>N(()=>import("./black-3-ship-DVSPF_lL.js"),[]),"../../../assets/icons/ships/black-4-ship.svg":()=>N(()=>import("./black-4-ship-B33nNuhq.js"),[]),"../../../assets/icons/ships/blue-1-ship.png":()=>N(()=>import("./blue-1-ship-fHZn_-oR.js"),[]),"../../../assets/icons/ships/blue-2-ship.png":()=>N(()=>import("./blue-2-ship-5hx_nUm4.js"),[]),"../../../assets/icons/ships/blue-3-ship.png":()=>N(()=>import("./blue-3-ship-DiVjTyPN.js"),[]),"../../../assets/icons/ships/blue-4-ship.png":()=>N(()=>import("./blue-4-ship-CdTaN49W.js"),[])}),`../../../assets/icons/ships/${r}-${a}-ship.${r=="blue"?"png":"svg"}`,7).then(_=>{l(_.default)}).catch(_=>{console.error("Error loading image ship:",_)})},[]),t.jsxs("div",{className:y(E.ship,s),style:{width:c},"data-ship":!0,"data-ship-size":a,"data-plane":e,children:[t.jsx("img",{className:E["--vertical"],src:"imgShip",alt:`param of ship: view= ${r}; size= ${a}`}),t.jsx("img",{className:E["--horizontal"],src:n,alt:`param of ship: view= ${r}; size= ${a}`})]})}function it({widthRect:i,cls:s}){const r={one:i,two:i*2,three:i*3,four:i*4};return t.jsxs("div",{className:y(d.constructor,s),children:[t.jsx("div",{className:d["contsturtor-title"],children:"Расставь корабли"}),t.jsx("div",{className:d["contsturtor-positon__port-station"],children:t.jsxs("div",{className:d["contsturtor-positon__port-wrapper"],style:{width:r.four+"px"},"data-port-ship":!0,children:[t.jsx("div",{className:d["constructor-rect"]}),t.jsx("div",{className:d["constructor-rect"]}),t.jsx("div",{className:d["constructor-rect"]}),t.jsx("div",{className:d["constructor-rect"]}),t.jsx(g,{size:4,view:"blue",plane:"horizontal",style:{width:i},cls:d.ship})]})}),t.jsxs("div",{className:d["contsturtor-positon__port-station"],children:[t.jsxs("div",{className:d["contsturtor-positon__port-wrapper"],style:{width:r.three+"px"},"data-port-ship":!0,children:[t.jsx("div",{className:d["constructor-rect"]}),t.jsx("div",{className:d["constructor-rect"]}),t.jsx("div",{className:d["constructor-rect"]}),t.jsx(g,{size:3,view:"blue",plane:"horizontal",style:{width:i},cls:d.ship})]}),t.jsxs("div",{className:d["contsturtor-positon__port-wrapper"],style:{width:r.three+"px"},"data-port-ship":!0,children:[t.jsx("div",{className:d["constructor-rect"]}),t.jsx("div",{className:d["constructor-rect"]}),t.jsx("div",{className:d["constructor-rect"]}),t.jsx(g,{size:3,view:"blue",plane:"horizontal",style:{width:i},cls:d.ship})]})]}),t.jsxs("div",{className:d["contsturtor-positon__port-station"],children:[t.jsxs("div",{className:d["contsturtor-positon__port-wrapper"],style:{width:r.two+"px"},"data-port-ship":!0,children:[t.jsx("div",{className:d["constructor-rect"]}),t.jsx("div",{className:d["constructor-rect"]}),t.jsx(g,{size:2,view:"blue",plane:"horizontal",style:{width:i},cls:d.ship})]}),t.jsxs("div",{className:d["contsturtor-positon__port-wrapper"],style:{width:r.two+"px"},"data-port-ship":!0,children:[t.jsx("div",{className:d["constructor-rect"]}),t.jsx("div",{className:d["constructor-rect"]}),t.jsx(g,{size:2,view:"blue",plane:"horizontal",style:{width:i},cls:d.ship})]}),t.jsxs("div",{className:d["contsturtor-positon__port-wrapper"],style:{width:r.two+"px"},"data-port-ship":!0,children:[t.jsx("div",{className:d["constructor-rect"]}),t.jsx("div",{className:d["constructor-rect"]}),t.jsx(g,{size:2,view:"blue",plane:"horizontal",style:{width:i},cls:d.ship})]})]}),t.jsxs("div",{className:y(d["contsturtor-positon__port-station"],d["--one"]),children:[t.jsx("div",{className:d["contsturtor-positon__port-wrapper"],style:{width:r.one+"px"},"data-port-ship":!0,children:t.jsx(g,{size:1,view:"blue",plane:"horizontal",style:{width:i},cls:d.ship})}),t.jsx("div",{className:d["contsturtor-positon__port-wrapper"],style:{width:r.one+"px"},"data-port-ship":!0,children:t.jsx(g,{size:1,view:"blue",plane:"horizontal",style:{width:i},cls:d.ship})}),t.jsx("div",{className:d["contsturtor-positon__port-wrapper"],style:{width:r.one+"px"},"data-port-ship":!0,children:t.jsx(g,{size:1,view:"blue",plane:"horizontal",style:{width:i},cls:d.ship})}),t.jsx("div",{className:d["contsturtor-positon__port-wrapper"],style:{width:r.one+"px"},"data-port-ship":!0,children:t.jsx(g,{size:1,view:"blue",plane:"horizontal",style:{width:i},cls:d.ship})})]})]})}function ct(i){return i?i.offsetWidth/10:0}function dt(i,s){let r;return function(...a){clearTimeout(r),r=setTimeout(()=>i.apply(this,a),s)}}function nt(i){const[s,r]=f.useState(0),a=f.useCallback(()=>{if(!i.current)return;const e=ct(i.current);r(c=>c!==e?e:c)},[i]);return f.useEffect(()=>{if(!i.current)return;const e=new ResizeObserver(c=>{for(const n of c)n.target===i.current&&dt(a,10)()});return e.observe(i.current),a(),()=>{e.disconnect()}},[i,a]),s}const lt={type:"btn"},ht={type:"btn"},xt={bot:"Порвать ботяру",online:"Найти соперника",tournament:"Найти соперника",invite:"ПОБЕДИ ТОВАРИЩА"};function mt(){const i=f.useRef(null),s=f.useRef(null),[r,a]=H(),e=X(),c=Y(),n=nt(i),l=r.get("typegame"),_=l=="invite"||l=="bot",p=()=>{e(-1)},x=()=>{document.querySelector("[data-port-ship] [data-ship]")||alert("ready")};return f.useEffect(()=>{if(!i.current)return;const v={highlight:m["--highlight"],perimeter:m["--perimeter"],putting:m["--putting"]},j=new U(i.current,v);return j.init(),()=>{j.unInit()}},[c]),t.jsx("div",{ref:s,className:y(m.constructor),style:{backgroundImage:`url(${Z})`},"data-aspect-ratio":c,children:t.jsxs("div",{className:m.constructor__box,children:[t.jsx("div",{className:m.constructor__action,children:t.jsx(k,{cls:m["constructor-action__exit"],paramsBtn:ht,onClick:p,children:"Назад"})}),t.jsxs("div",{className:m.constructor__positon,children:[t.jsx(Q,{inputRef:i,cls:m["constructor-positon__coord"]}),t.jsx(it,{widthRect:n,cls:m["contsturtor-positon__port"]})]}),t.jsxs("div",{className:m.constructor__action,children:[t.jsx("div",{className:m["constructor-action__rules"]}),t.jsxs(k,{cls:y(m["constructor-action__play"],{[m.red]:_}),paramsBtn:lt,onClick:x,children:[t.jsx("div",{className:m["constructor-action-play__text"],children:xt[l+""]}),t.jsx("div",{className:m["constructor-action-play__bang"],children:t.jsx("img",{src:_?tt:ot,alt:""})})]})]})]})})}export{mt as default};
